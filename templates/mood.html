<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MomCare Mood & Wellness</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
    </style>
</head>

<body class="bg-[#a5dbe5] text-[#104b0b] font-['Poppins'] m-0 p-0">

    {% include 'navbar.html' %}

    <!-- Shared Data for JS -->
    <div id="wellnessData" data-mood="{{ data.mood if data else 'Neutral' }}"
        data-water="{{ data.water if data and data.water else 0 }}"
        data-sleep="{{ data.sleep if data and data.sleep else 7.5 }}"
        data-activity="{{ data.activity if data else 'Light Stretching' }}" class="hidden"></div>

    <main class="max-w-[1300px] mx-auto p-6 md:p-10">

        <div class="grid grid-cols-1 lg:grid-cols-[7fr_5fr] gap-6">

            <!-- Left Column -->
            <div class="flex flex-col gap-6">

                <div class="bg-white rounded-xl shadow-md overflow-hidden">
                    <div class="bg-[#5a8d26] text-white text-center py-4">
                        <h5 class="text-lg font-semibold m-0">How are you feeling today, {{ first }}?</h5>
                    </div>
                    <div class="p-6">
                        <form id="moodForm" action="/update_mood" method="POST">
                            <input type="hidden" name="mood" id="moodVal">
                            <div class="flex justify-around text-center py-2">
                                <div class="cursor-pointer transition-transform hover:scale-110"
                                    onclick="submitMood('Happy')">
                                    <div
                                        class="w-[65px] h-[65px] rounded-full flex items-center justify-center text-4xl text-[#00e676] mb-2 mx-auto">
                                        <i class="far fa-smile"></i>
                                    </div>
                                    <p class="text-sm font-bold m-0">Happy</p>
                                </div>
                                <div class="cursor-pointer transition-transform hover:scale-110"
                                    onclick="submitMood('Neutral')">
                                    <div
                                        class="w-[65px] h-[65px] rounded-full flex items-center justify-center text-4xl text-[#00b0ff] mb-2 mx-auto">
                                        <i class="far fa-meh"></i>
                                    </div>
                                    <p class="text-sm font-bold m-0">Neutral</p>
                                </div>
                                <div class="cursor-pointer transition-transform hover:scale-110"
                                    onclick="submitMood('Tired')">
                                    <div
                                        class="w-[65px] h-[65px] rounded-full flex items-center justify-center text-4xl text-[#ffc400] mb-2 mx-auto">
                                        <i class="far fa-frown"></i>
                                    </div>
                                    <p class="text-sm font-bold m-0">Tired</p>
                                </div>
                                <div class="cursor-pointer transition-transform hover:scale-110"
                                    onclick="submitMood('Stressed')">
                                    <div
                                        class="w-[65px] h-[65px] rounded-full flex items-center justify-center text-4xl text-[#ff1744] mb-2 mx-auto">
                                        <i class="far fa-tired"></i>
                                    </div>
                                    <p class="text-sm font-bold m-0">Stressed</p>
                                    <span class="text-[0.6rem] text-gray-500">(Workload)</span>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Metrics Row -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <!-- Rest & Sleep -->
                    <div class="bg-white text-[#104b0b] p-5 rounded-xl flex flex-col justify-between min-h-[150px] cursor-pointer shadow-md border-t-4 border-[#5a8d26] transition-all hover:translate-y-[-2px]"
                        onclick="editMetric('sleep')">
                        <div class="font-bold text-sm flex items-center mb-2 text-[#5a8d26]">
                            <i class="fas fa-moon mr-2"></i>Rest & Sleep
                        </div>
                        <div class="text-3xl font-extrabold my-2" id="sleepVal">{{ data.sleep if data and data.sleep
                            else '7.5' }} <span class="text-sm font-normal">hours</span></div>
                        <div class="text-[0.7rem] leading-tight text-gray-500" id="sleepTip">Click to update sleep hours
                        </div>
                    </div>

                    <!-- Hydration -->
                    <div class="bg-white text-[#104b0b] p-5 rounded-xl flex flex-col justify-between min-h-[150px] cursor-pointer shadow-md border-t-4 border-[#5a8d26] transition-all hover:translate-y-[-2px]"
                        onclick="editMetric('water')">
                        <div class="font-bold text-sm flex items-center mb-2 text-[#5a8d26]">
                            <i class="fas fa-tint mr-2"></i>Hydration
                        </div>
                        <div class="text-3xl font-extrabold my-2" id="waterVal">{{ data.water if data and data.water
                            else '0' }} <span class="text-sm font-normal">/8 glasses</span></div>
                        <div class="text-[0.7rem] leading-tight text-gray-500" id="waterTip">Click to update water
                            intake</div>
                    </div>

                    <!-- Physical Wellbeing -->
                    <div class="bg-white text-[#104b0b] p-5 rounded-xl flex flex-col justify-between min-h-[150px] cursor-pointer shadow-md border-t-4 border-[#5a8d26] transition-all hover:translate-y-[-2px]"
                        onclick="updateActivitySuggestion()">
                        <div class="font-bold text-sm flex items-center mb-2 text-[#5a8d26]">
                            <i class="fas fa-running mr-2"></i>Physical Wellbeing
                        </div>
                        <div class="text-xl font-extrabold my-2 leading-tight" id="activityVal">{{
                            data.activity if data and
                            data.activity else 'Light Stretching' }}</div>
                        <div class="opacity-0 text-[0.7rem] leading-tight">placeholder</div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-md overflow-hidden">
                    <div class="bg-[#5a8d26] text-white py-3 text-center">
                        <p class="m-0 font-bold">Emotional & Mental Wellness</p>
                    </div>
                    <div class="p-6">
                        <label class="text-xs font-bold block mb-2">Stress Level</label>
                        <input type="range" id="stressSlider" min="1" max="10"
                            value="{{ data.stress if data and data.stress else 5 }}"
                            class="w-full h-2 bg-gray-200 rounded-lg appearance-none pointer-events-none accent-[#5a8d26]"
                            tabindex="-1">
                        <div class="flex justify-between text-xs text-gray-500 mt-1">
                            <span>Low</span><span>Neutral</span><span>High</span>
                        </div>
                        <p id="stressMessage" class="text-center mt-4 italic text-[#104b0b] font-medium">"{{
                            data.wellness_tip if data else 'Take a breath. ‚òï' }}"</p>
                    </div>
                </div>

            </div>

            <!-- Right Column -->
            <div class="flex flex-col gap-6">

                <!-- Weekly Summary -->
                <div class="bg-white rounded-xl shadow-md overflow-hidden">
                    <div class="bg-[#5a8d26] text-white py-4 text-center">
                        <h5 class="text-lg font-semibold m-0">Weekly Summary</h5>
                    </div>
                    <div class="p-6">
                        <p class="text-xs text-gray-500 mb-4 text-center">Last 7 Days</p>
                        <div class="h-[250px] w-full">
                            <canvas id="weeklyChart"></canvas>
                        </div>
                        <p class="mt-4 text-xs text-center">
                            Your most frequent mood this week was <span class="text-[#5bc0de] font-bold">*{{ data.mood
                                if data and data.mood else 'Neutral' }}</span>
                        </p>
                    </div>
                </div>

                <!-- Wellness tip removed at user request -->


            </div>

        </div>

    </main>

    <script>
        const wellnessDataEl = document.getElementById('wellnessData');
        let selectedMood = wellnessDataEl.dataset.mood;
        let currentWater = parseFloat(wellnessDataEl.dataset.water);
        let currentSleep = parseFloat(wellnessDataEl.dataset.sleep);
        let currentActivity = wellnessDataEl.dataset.activity;
        let moodChart; // Global chart instance for updates

        const moodColorMap = {
            0: '#ff1744', // Stressed
            1: '#ffc400', // Tired
            2: '#00b0ff', // Neutral
            3: '#00e676'  // Happy
        };

        const getMoodColors = (scores) => scores.map(score => moodColorMap[score] || '#5a8d26');

        const highlightColorMap = {
            'Happy': 'rgba(0, 230, 118, 0.2)',
            'Neutral': 'rgba(0, 176, 255, 0.2)',
            'Tired': 'rgba(255, 196, 0, 0.2)',
            'Stressed': 'rgba(255, 23, 68, 0.2)'
        };

        function updateIconHighlights(selectedVal) {
            document.querySelectorAll('[data-mood]').forEach(el => {
                const mood = el.getAttribute('data-mood');
                const iconContainer = el.querySelector('div');
                if (mood === selectedVal) {
                    el.style.opacity = '1';
                    el.style.transform = 'scale(1.1)';
                    if (iconContainer) {
                        iconContainer.style.backgroundColor = highlightColorMap[mood];
                        iconContainer.style.boxShadow = `0 0 15px ${highlightColorMap[mood]}`;
                    }
                } else {
                    el.style.opacity = '0.6';
                    el.style.transform = 'scale(1)';
                    if (iconContainer) {
                        iconContainer.style.backgroundColor = 'transparent';
                        iconContainer.style.boxShadow = 'none';
                    }
                }
            });
        }

        function showToast() {
            const toast = document.getElementById('toast');
            toast.classList.remove('opacity-0', 'translate-y-10');
            toast.classList.add('opacity-100', 'translate-y-0');
            setTimeout(() => {
                toast.classList.remove('opacity-100', 'translate-y-0');
                toast.classList.add('opacity-0', 'translate-y-10');
            }, 3000);
        }

        // Sleep tips based on hours
        const sleepTipsByHours = {
            veryLow: ['üö® Get more sleep tonight!', '‚è∞ Aim for 7-8 hours', 'üò¥ Your body needs rest', 'üí§ Sleep deprivation affects health'],
            low: ['üõèÔ∏è Almost there! Get 1-2 more hours', '‚è∞ Target 7-8 hours for best results', 'üò¥ A bit more sleep helps', 'üí™ More rest = more energy'],
            perfect: ['‚ú® Perfect sleep schedule!', 'üëè You\'re well-rested!', 'üíØ Great job!', 'üåü Keep it up!'],
            high: ['üèÉ You\'re well-rested! Stay active', '‚ö° Great energy levels ahead', 'üéâ Excellent rest!', '‚ú® Time to get moving!']
        };

        function getSleepTip() {
            const hours = currentSleep;
            let tips;

            if (hours < 5) {
                tips = sleepTipsByHours.veryLow;
            } else if (hours < 7) {
                tips = sleepTipsByHours.low;
            } else if (hours <= 9) {
                tips = sleepTipsByHours.perfect;
            } else {
                tips = sleepTipsByHours.high;
            }

            // Return first tip for stability (deterministic)
            return tips[0];
        }

        // Water tips based on glasses
        const waterTipsByGlasses = {
            veryLow: ['üíß Drink more water!', '‚è∞ You need at least 6-8 glasses', 'üö® Dehydration affects health', 'üí™ Hydrate for energy'],
            low: ['üíß Keep drinking!', '‚è∞ Almost at goal! Get 3 more glasses', 'üåä More water needed', '‚ö° Hydration boost!'],
            perfect: ['‚ú® Perfect hydration!', 'üëè Great job staying hydrated!', 'üíØ You\'re well hydrated!', 'üåü Keep it up!'],
            high: ['üéâ Excellent hydration!', 'üíß You\'re very well hydrated!', '‚ú® Amazing water intake!', 'üèÜ Hydration champion!']
        };

        function getWaterTip() {
            const glasses = currentWater;
            let tips;

            if (glasses < 3) {
                tips = waterTipsByGlasses.veryLow;
            } else if (glasses < 6) {
                tips = waterTipsByGlasses.low;
            } else if (glasses <= 8) {
                tips = waterTipsByGlasses.perfect;
            } else {
                tips = waterTipsByGlasses.high;
            }

            // Return first tip for stability (deterministic)
            return tips[0];
        }

        function updateWaterTip() {
            const tip = getWaterTip();
            const tipElement = document.getElementById('waterTip');
            if (tipElement) {
                tipElement.textContent = tip;
            }
        }

        function updateSleepTip() {
            const tip = getSleepTip();
            const tipElement = document.getElementById('sleepTip');
            if (tipElement) {
                tipElement.textContent = tip;
            }
        }

        // Activity suggestions based on wellness
        const activitiesByWellness = {
            low: ['Light Stretching', 'Gentle Walk', 'Breathing Exercises', 'Yoga', 'Tai Chi', 'Meditation', 'Neck Rolls', 'Shoulder Shrugs'],
            moderate: ['Brisk Walk', 'Dancing', 'Swimming', 'Pilates', 'Hiking', 'Gardening', 'Jump Rope', 'Elliptical', 'Badminton', 'Volleyball'],
            high: ['Running', 'Weight Training', 'Cycling', 'HIIT Workout', 'Mountain Climbing', 'CrossFit', 'Boxing', 'Tennis', 'Basketball', 'Sprint Training']
        };

        function getWellnessLevel() {
            // Calculate overall wellness (0-100)
            let score = 0;

            // Sleep: 0-25 points
            if (currentSleep >= 7 && currentSleep <= 9) score += 25;
            else if (currentSleep >= 5 && currentSleep < 7) score += 15;
            else if (currentSleep > 9) score += 20;

            // Water: 0-25 points
            if (currentWater >= 6) score += 25;
            else if (currentWater >= 3) score += 15;

            // Stress: 0-25 points
            const stress = parseInt(document.getElementById('stressSlider')?.value || 5);
            if (stress <= 4) score += 25;
            else if (stress <= 6) score += 15;

            // Activity: 0-25 points
            if (currentActivity && currentActivity.toLowerCase() !== 'light stretching') score += 20;

            return score;
        }

        function getRandomActivitySuggestion() {
            const wellnessScore = getWellnessLevel();
            let activities;

            if (wellnessScore >= 70) {
                activities = activitiesByWellness.high;
            } else if (wellnessScore >= 40) {
                activities = activitiesByWellness.moderate;
            } else {
                activities = activitiesByWellness.low;
            }

            // Return random activity from appropriate list
            return activities[Math.floor(Math.random() * activities.length)];
        }

        function updateActivitySuggestion() {
            const suggestedActivity = getRandomActivitySuggestion();
            document.getElementById('activityVal').textContent = suggestedActivity;
            currentActivity = suggestedActivity;
        }

        async function submitMood(val) {
            // Visual feedback on selection
            updateIconHighlights(val);

            // Connect to stress slider
            const slider = document.getElementById('stressSlider');
            if (slider) {
                const levels = { 'Happy': 2, 'Neutral': 5, 'Tired': 7, 'Stressed': 10 };
                const newLevel = levels[val] || 5;
                slider.value = newLevel;
                // Trigger the input event to update the message and DB (via updateWellness)
                const event = new Event('input');
                slider.dispatchEvent(event);
            }

            selectedMood = val;
            document.getElementById('moodVal').value = val;

            // Use AJAX to submit mood without page reload
            try {
                const formData = new FormData();
                formData.append('mood', val);

                const response = await fetch('/update_mood', {
                    method: 'POST',
                    body: formData
                });

                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        console.log(`Mood updated to: ${val}`);
                        showToast();

                        // Dynamically update the weekly chart if new data is provided
                        if (result.week_data && moodChart) {
                            moodChart.data.datasets[0].data = result.week_data;
                            moodChart.data.datasets[0].backgroundColor = getMoodColors(result.week_data);
                            moodChart.update();
                        }
                    }
                } else {
                    console.error('Failed to update mood');
                }
            } catch (error) {
                console.error('Error updating mood:', error);
            }
        }

        async function updateWellness(metric, value) {
            try {
                const response = await fetch('/update_wellness', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        metric: metric,
                        value: value
                    })
                });

                const result = await response.json();
                if (result.success) {
                    console.log(`${metric} updated: ${value}`);
                }
            } catch (error) {
                console.error('Error updating wellness:', error);
            }
        }

        function incrementWater() {
            if (currentWater < 8) {
                currentWater += 1;
                document.getElementById('waterVal').textContent = currentWater + '/8 glasses';
                updateWellness('water', currentWater);
            }
        }

        function editMetric(metric) {
            if (metric === 'sleep') {
                openSleepModal();
            } else if (metric === 'water') {
                openWaterModal();
            } else if (metric === 'activity') {
                const prompt_text = 'Enter activity (e.g., "Light Stretching", "Jogging", "Yoga"):';
                const newValue = prompt(prompt_text, currentActivity);

                if (newValue !== null && newValue.trim() !== '') {
                    currentActivity = newValue;
                    document.getElementById('activityVal').textContent = newValue;
                    updateWellness('activity', newValue);
                }
            }
        }

        function openSleepModal() {
            const modal = document.getElementById('sleepModal');
            const sleepHoursInput = document.getElementById('sleepHours');

            // Set current sleep value
            sleepHoursInput.value = currentSleep;

            // Show modal
            modal.classList.remove('hidden');
        }

        function closeSleepModal() {
            const modal = document.getElementById('sleepModal');
            modal.classList.add('hidden');
        }

        function openWaterModal() {
            const modal = document.getElementById('waterModal');
            const waterGlassesInput = document.getElementById('waterGlasses');

            // Set current water value
            waterGlassesInput.value = currentWater;

            // Show modal
            modal.classList.remove('hidden');
        }

        function closeWaterModal() {
            const modal = document.getElementById('waterModal');
            modal.classList.add('hidden');
        }

        // Handle form submissions when DOM is ready
        document.addEventListener('DOMContentLoaded', function () {
            // Handle sleep form submission
            const sleepForm = document.getElementById('sleepForm');
            if (sleepForm) {
                sleepForm.addEventListener('submit', async function (e) {
                    e.preventDefault();

                    const sleepHours = parseFloat(document.getElementById('sleepHours').value);
                    try {
                        const response = await fetch('/update_wellness', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ metric: 'sleep', value: sleepHours })
                        });

                        const result = await response.json();
                        if (result.success) {
                            console.log('Sleep updated');
                            // Update internal state and UI
                            currentSleep = sleepHours;
                            document.getElementById('sleepVal').innerHTML = `${sleepHours} <span class="text-sm font-normal">hours</span>`;
                            if (typeof updateSleepTip === 'function') updateSleepTip();

                            closeSleepModal();
                            showToast();
                        } else {
                            alert('Failed to save sleep data. Please try again.');
                        }
                    } catch (error) {
                        console.error('Error updating sleep:', error);
                        alert('An error occurred. Please try again.');
                    }
                });
            }

            // Handle water form submission
            const waterForm = document.getElementById('waterForm');
            if (waterForm) {
                waterForm.addEventListener('submit', async function (e) {
                    e.preventDefault();

                    const waterGlasses = parseFloat(document.getElementById('waterGlasses').value);
                    try {
                        const response = await fetch('/update_wellness', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ metric: 'water', value: waterGlasses })
                        });

                        const result = await response.json();
                        if (result.success) {
                            console.log('Water updated');
                            // Update internal state and UI
                            currentWater = waterGlasses;
                            document.getElementById('waterVal').innerHTML = `${waterGlasses} <span class="text-sm font-normal">/8 glasses</span>`;
                            if (typeof updateWaterTip === 'function') updateWaterTip();

                            closeWaterModal();
                            showToast();
                        } else {
                            alert('Failed to save hydration data. Please try again.');
                        }
                    } catch (error) {
                        console.error('Error updating water:', error);
                        alert('An error occurred. Please try again.');
                    }
                });
            }

            // Initialize tips and other logic
            updateSleepTip();
            updateWaterTip();

            // Add data attributes to mood buttons for selection tracking
            document.querySelectorAll('[onclick*="submitMood"]').forEach(el => {
                const moodMatch = el.getAttribute('onclick').match(/'([^']+)'/);
                if (moodMatch) {
                    el.setAttribute('data-mood', moodMatch[1]);
                }
            });

            // Re-apply selection state if we have a selectedMood
            if (selectedMood) {
                updateIconHighlights(selectedMood);
            } else {
                updateIconHighlights(null);
            }

            // Stress slider interactivity
            const stressSlider = document.getElementById('stressSlider');
            const stressMessage = document.getElementById('stressMessage');

            // Tips based on stress levels (Low: 1-3, Moderate: 4-7, High: 8-10)
            const stressTipsData = {
                low: [
                    "Great job keeping calm! üåø",
                    "Feeling balanced is a superpower. ‚ú®",
                    "Enjoy this peaceful moment. üå∏",
                    "You're doing great! Keep smiling. üòä"
                ],
                moderate: [
                    "You're doing okay. Take a breath. ‚òï",
                    "Stay steady, you've got this. üí™",
                    "A short break might help recharge. üîã",
                    "Keep going, but don't forget to rest. üõë"
                ],
                high: [
                    "It's okay to pause and breathe. üíõ",
                    "Be kind to yourself right now. üõ°Ô∏è",
                    "One step at a time is enough. üë£",
                    "Take a deep breath. You are strong. üåü"
                ]
            };

            function getStressTip(level) {
                let tips;
                if (level <= 3) {
                    tips = stressTipsData.low;
                } else if (level <= 7) {
                    tips = stressTipsData.moderate;
                } else {
                    tips = stressTipsData.high;
                }

                // Deterministic selection matching server-side logic:
                // (level + day_of_year) % length
                const now = new Date();
                const start = new Date(now.getFullYear(), 0, 0);
                const diff = (now - start) + ((start.getTimezoneOffset() - now.getTimezoneOffset()) * 60 * 1000);
                const oneDay = 1000 * 60 * 60 * 24;
                const dayOfYear = Math.floor(diff / oneDay);

                return tips[(level + dayOfYear) % tips.length];
            }

            if (stressSlider) {
                stressSlider.addEventListener('input', function () {
                    const level = parseInt(this.value);
                    if (stressMessage) {
                        stressMessage.textContent = `"${getStressTip(level)}"`;
                    }
                    updateWellness('stress', level);
                });

                // NO INITIALIZATION HERE - let the server-provided tip stay until user interacts
            }

            // Weekly mood chart with real data
            const ctx = document.getElementById('weeklyChart');
            if (ctx) {
                const weekData = JSON.parse('{{ data.week_data | tojson }}') || [2, 2, 2, 2, 2, 2, 2];

                moodChart = new Chart(ctx.getContext('2d'), {
                    type: 'bar',
                    data: {
                        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                        datasets: [{
                            label: 'Mood Score',
                            data: weekData,
                            backgroundColor: getMoodColors(weekData),
                            borderColor: 'transparent',
                            borderWidth: 1,
                            borderRadius: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 3,
                                ticks: {
                                    callback: function (value) {
                                        const moods = ['Stressed', 'Tired', 'Neutral', 'Happy'];
                                        return moods[value] || '';
                                    }
                                }
                            }
                        },
                        plugins: {
                            legend: { display: false }
                        }
                    }
                });
            }
        });
    </script>

    <!-- Sleep Input Modal -->
    <div id="sleepModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full mx-4 transform transition-all">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-[#5a8d26] rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-moon text-white text-2xl"></i>
                </div>
                <h3 class="text-2xl font-bold text-[#104b0b]">Rest & Sleep Tracker</h3>
                <p class="text-sm text-gray-500 mt-2">Track your daily sleep hours</p>
            </div>

            <form id="sleepForm" class="space-y-6">
                <!-- Sleep Hours Input -->
                <div>
                    <label for="sleepHours" class="block text-sm font-bold text-[#104b0b] mb-2">
                        <i class="fas fa-bed mr-2"></i>Hours of Sleep
                    </label>
                    <input type="number" id="sleepHours" name="sleepHours" min="0" max="24" step="0.5"
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-[#5a8d26] focus:outline-none text-lg font-semibold text-center"
                        placeholder="7.5" required>
                    <p class="text-xs text-gray-500 mt-1 text-center">Enter hours between 0-24</p>
                </div>

                <!-- Action Buttons -->
                <div class="flex gap-3 pt-4">
                    <button type="button" onclick="closeSleepModal()"
                        class="flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition-colors">
                        Cancel
                    </button>
                    <button type="submit"
                        class="flex-1 px-6 py-3 bg-[#5a8d26] text-white rounded-xl font-semibold hover:bg-[#4a7216] transition-colors shadow-lg">
                        Save
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Hydration Input Modal -->
    <div id="waterModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full mx-4 transform transition-all">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-[#5a8d26] rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-tint text-white text-2xl"></i>
                </div>
                <h3 class="text-2xl font-bold text-[#104b0b]">Hydration Tracker</h3>
                <p class="text-sm text-gray-500 mt-2">Track your daily water intake</p>
            </div>

            <form id="waterForm" class="space-y-6">
                <!-- Water Glasses Input -->
                <div>
                    <label for="waterGlasses" class="block text-sm font-bold text-[#104b0b] mb-2">
                        <i class="fas fa-glass-whiskey mr-2"></i>Glasses of Water
                    </label>
                    <input type="number" id="waterGlasses" name="waterGlasses" min="0" max="8" step="0.5"
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-[#5a8d26] focus:outline-none text-lg font-semibold text-center"
                        placeholder="8" required>
                    <p class="text-xs text-gray-500 mt-1 text-center">Enter glasses between 0-8</p>
                </div>

                <!-- Action Buttons -->
                <div class="flex gap-3 pt-4">
                    <button type="button" onclick="closeWaterModal()"
                        class="flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition-colors">
                        Cancel
                    </button>
                    <button type="submit"
                        class="flex-1 px-6 py-3 bg-[#5a8d26] text-white rounded-xl font-semibold hover:bg-[#4a7216] transition-colors shadow-lg">
                        Save
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast"
        class="fixed bottom-10 left-1/2 transform -translate-x-1/2 bg-[#5a8d26] text-white px-6 py-3 rounded-full shadow-2xl transition-all duration-300 opacity-0 translate-y-10 z-[100] pointer-events-none font-bold">
        Saved!
    </div>
</body>

</html>