<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MomCare Budget & Expenses</title>
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap");

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: "Poppins", sans-serif;
      background: #a5dbe5;
      color: #23423c;
    }

    .app {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Header */
    .header {
      background: #1f4f1e;
      color: #ffffff;
      padding: 18px 40px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: relative;
      z-index: 10;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .logo-img {
      height: 60px;
      width: auto;
      display: block;
    }

    .header-title {
      margin-left: 10px;
    }

    .header-title h1 {
      margin: 0;
      font-size: 26px;
      font-weight: 600;
    }

    .header-title .today-label {
      margin-top: 4px;
      font-size: 13px;
      opacity: 0.9;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 24px;
    }

    .month-picker {
      background: #ffffff;
      padding: 6px 12px;
      border-radius: 4px;
      display: flex;
      align-items: center;
      gap: 8px;
      color: #23423c;
      font-size: 14px;
    }

    .month-picker select {
      border: none;
      outline: none;
      font-family: inherit;
      font-size: 14px;
      background: transparent;
      cursor: pointer;
    }

    .hamburger-btn {
      border: none;
      background: transparent;
      padding: 0;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap: 6px;
    }

    .hamburger-line {
      width: 36px;
      height: 6px;
      border-radius: 6px;
      background: #f9d24b;
    }

    .nav-panel {
      position: fixed;
      top: 0;
      right: 0;
      height: 100vh;
      width: 260px;
      background: #ffffff;
      color: #23423c;
      border-radius: 0 0 0 10px;
      box-shadow: -8px 0 20px rgba(0, 0, 0, 0.25);
      padding: 10px 0;
      display: block;
      transform: translateX(100%);
      transition: transform 0.3s ease;
      z-index: 100;
    }

    .nav-panel.open {
      transform: translateX(0);
    }

    .nav-panel-item {
      padding: 12px 20px;
      font-size: 14px;
      cursor: pointer;
      white-space: nowrap;
    }

    .nav-panel-item:hover {
      background: #f2f8f5;
    }

    .content {
      padding: 30px 40px 40px;
      flex: 1;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 24px;
    }

    .card {
      background: #ffffff;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
      display: flex;
      flex-direction: column;
      min-height: 260px;
    }

    .card-header {
      background: #f9a825;
      color: #ffffff;
      padding: 14px 20px;
      font-weight: 600;
      font-size: 18px;
    }

    .card-body {
      padding: 18px 22px 22px;
      font-size: 14px;
      flex: 1;
    }

    /* center spending card content */
    .spending-card .card-body {
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .summary-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      font-size: 15px;
    }

    .summary-label {
      font-weight: 500;
    }

    .summary-value input {
      border: 1px solid #cfd8dc;
      border-radius: 4px;
      padding: 4px 6px;
      font-size: 14px;
      width: 140px;
    }

    .summary-divider {
      border-top: 1px dashed #9e9e9e;
      margin: 14px 0;
    }

    .summary-highlight {
      margin-top: 6px;
      font-weight: 500;
      color: #0e4f23;
    }

    .category-summary-block {
      margin-top: 4px;
      margin-bottom: 6px;
      font-size: 13px;
    }

    .category-summary-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 3px;
    }

    .category-summary-name {
      font-weight: 500;
    }

    .category-summary-amount {
      opacity: 0.9;
    }

    .category-summary-right {
      display: flex;
      gap: 6px;
      align-items: center;
    }

    .spend-columns {
      display: flex;
      gap: 96px;           /* big space between pie and list */
      align-items: center;
      justify-content: center;
      width: 100%;
    }

    #pieChart {
      width: 160px;
      height: 160px;
      border-radius: 50%;
      box-shadow: 0 0 0 8px #f1f8e9;
      background: #ffffff;
      flex-shrink: 0;
    }

    .category-list {
      flex: 1;
      max-width: 320px;
    }

    .category-row {
      display: flex;
      justify-content: space-between;
      font-size: 13px;
      margin-bottom: 6px;
    }

    .category-name::before {
      content: "";
      display: inline-block;
      width: 20px;
      height: 2px;
      background: #cfd8dc;
      margin-right: 8px;
      vertical-align: middle;
    }

    .form-grid {
      display: grid;
      grid-template-columns: auto 1fr;
      row-gap: 12px;
      column-gap: 16px;
      align-items: center;
    }

    .field-label {
      font-weight: 500;
      font-size: 14px;
    }

    .field-input,
    .field-select,
    .field-date,
    .field-notes {
      width: 100%;
      padding: 6px 8px;
      border-radius: 4px;
      border: 1px solid #cfd8dc;
      font-family: inherit;
      font-size: 14px;
    }

    .field-select {
      background: #ffffff;
    }

    .eco-row {
      grid-column: 1 / -1;
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 4px;
    }

    .eco-box {
      width: 20px;
      height: 20px;
      border-radius: 4px;
      border: 2px solid #0e4f23;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #fff;
    }

    .eco-box input {
      width: 14px;
      height: 14px;
      accent-color: #0e4f23;
    }

    .eco-leaf {
      color: #4caf50;
      font-size: 16px;
      margin-left: 4px;
    }

    .notes-row {
      grid-column: 1 / -1;
      display: grid;
      grid-template-columns: auto 1fr;
      column-gap: 16px;
      align-items: flex-start;
    }

    .field-notes {
      resize: vertical;
      min-height: 60px;
    }

    .card-footer-actions {
      margin-top: 14px;
      display: flex;
      justify-content: flex-end;
      gap: 12px;
    }

    .btn {
      border: none;
      border-radius: 20px;
      padding: 8px 16px;
      font-size: 14px;
      cursor: pointer;
      font-weight: 500;
      font-family: inherit;
    }

    .btn-primary {
      background: #0e4f23;
      color: #ffffff;
    }

    .btn-secondary {
      background: transparent;
      color: #607d8b;
    }

    .btn-primary:hover {
      opacity: 0.9;
    }

    /* small buttons */
    .btn-remove,
    .btn-clear-cat {
      padding: 4px 10px;
      font-size: 11px;
      border-radius: 999px;
    }

    /* Grocery table */
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
      margin-bottom: 8px;
      table-layout: fixed;
    }

    col.col-check { width: 5%; }
    col.col-item  { width: 30%; }
    col.col-qty   { width: 10%; }
    col.col-cost  { width: 18%; }
    col.col-bcat  { width: 27%; }
    col.col-action{ width: 10%; }

    thead {
      background: #f5f5f5;
      font-weight: 600;
    }

    th,
    td {
      border: 1px solid #eceff1;
      padding: 6px 8px;
      text-align: left;
    }

    .grocery-input-row input,
    .grocery-input-row select {
      width: 100%;
      padding: 6px 8px;
      border-radius: 4px;
      border: 1px solid #cfd8dc;
      font-size: 13px;
      font-family: inherit;
      box-sizing: border-box;
    }

    .grocery-submit-btn {
      margin-top: 6px;
      padding: 8px 22px;
      font-size: 13px;
      border-radius: 999px;
    }

    .add-to-list-label {
      font-size: 13px;
      margin-top: 6px;
    }

    @media (max-width: 960px) {
      .header {
        padding: 16px 20px;
        flex-wrap: wrap;
        gap: 10px;
      }

      .header-title {
        margin-left: 0;
      }

      .content {
        padding: 20px;
      }

      .grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
<div class="app">
  <!-- HEADER -->
  <header class="header">
    <div class="header-left">
      <img src="momcare_logo_white.png" alt="MomCare Balance Life Logo" class="logo-img" />
      <div class="header-title">
        <h1>Budget &amp; Expenses</h1>
        <div class="today-label" id="todayLabel">Today:</div>
      </div>
    </div>

    <div class="header-right">
      <div class="month-picker">
        <select id="monthSelect"></select>
        <select id="yearSelect"></select>
      </div>

      <button class="hamburger-btn" id="menuToggle" aria-label="Open navigation">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      </button>
    </div>
  </header>

  <!-- NAV -->
  <div class="nav-panel" id="navPanel">
    <div class="nav-panel-item">Login Page</div>
    <div class="nav-panel-item">My Account</div>
    <div class="nav-panel-item">Dashboard</div>
    <div class="nav-panel-item">Task Tracker</div>
    <div class="nav-panel-item">Budget &amp; Expense Tracker</div>
    <div class="nav-panel-item">Mood &amp; Wellness</div>
  </div>

  <!-- CONTENT -->
  <main class="content">
    <div class="grid">
      <!-- Monthly Budget Summary -->
      <section class="card">
        <div class="card-header">Monthly Budget Summary</div>
        <div class="card-body">
          <div class="summary-row">
            <div class="summary-label">Monthly Income</div>
            <div class="summary-value">
              <input type="number" id="incomeInput" value="160000" min="0" />
            </div>
          </div>
          <div class="summary-row">
            <div class="summary-label">Monthly Budget Limit</div>
            <div class="summary-value">
              <input type="number" id="budgetInput" value="160000" min="0" />
            </div>
          </div>
          <div class="summary-row">
            <div class="summary-label">Total Spent This Month</div>
            <div class="summary-value" id="totalSpentDisplay">‚Ç± 0.00</div>
          </div>

          <div class="summary-divider"></div>

          <div id="categorySummary" class="category-summary-block"></div>

          <div class="summary-row">
            <div class="summary-label" id="budgetUsedLabel">0% Budget Used</div>
            <div class="summary-value summary-highlight" id="remainingDisplay">
              Remaining: ‚Ç± 0.00
            </div>
          </div>
        </div>
      </section>

      <!-- Spending Category -->
      <section class="card spending-card">
        <div class="card-header">Spending Category</div>
        <div class="card-body">
          <div class="spend-columns">
            <canvas id="pieChart" width="200" height="200"></canvas>
            <div class="category-list" id="categoryList"></div>
          </div>
        </div>
      </section>

      <!-- Add Expense -->
      <section class="card">
        <div class="card-header">Add Expense</div>
        <div class="card-body">
          <form id="expenseForm">
            <div class="form-grid">
              <label class="field-label" for="expenseAmount">Amount</label>
              <input
                id="expenseAmount"
                type="number"
                min="0"
                step="0.01"
                class="field-input"
                placeholder="Enter amount"
              />

              <label class="field-label" for="expenseCategory">Category</label>
              <select id="expenseCategory" class="field-select">
                <option value="">Select category</option>
                <option>Groceries</option>
                <option>Kids/School</option>
                <option>Transport</option>
                <option>Utilities</option>
                <option>Home Mortgage</option>
                <option>Subscription</option>
                <option>Savings</option>
                <option>Others</option>
              </select>

              <label class="field-label" for="expenseDate">Date</label>
              <input
                id="expenseDate"
                type="date"
                class="field-date"
              />

              <div class="eco-row">
                <div class="eco-box">
                  <input type="checkbox" id="ecoCheckbox" disabled />
                </div>
                <span>Mark as Eco-Spending</span>
                <span class="eco-leaf">üçÉ</span>
              </div>

              <div class="notes-row">
                <label class="field-label" for="expenseNotes">Notes (Optional)</label>
                <textarea
                  id="expenseNotes"
                  class="field-notes"
                  placeholder="Add any details about this expense"
                ></textarea>
              </div>
            </div>

            <div class="card-footer-actions">
              <button type="button" class="btn btn-secondary" id="clearExpenseBtn">
                Cancel
              </button>
              <button type="submit" class="btn btn-primary">
                Add Expense
              </button>
            </div>
          </form>
        </div>
      </section>

      <!-- Grocery & Household List -->
      <section class="card">
        <div class="card-header">Grocery &amp; Household List</div>
        <div class="card-body">
          <form id="groceryForm">
            <table>
              <colgroup>
                <col class="col-check" />
                <col class="col-item" />
                <col class="col-qty" />
                <col class="col-cost" />
                <col class="col-bcat" />
                <col class="col-action" />
              </colgroup>
              <thead>
                <tr>
                  <th>‚úì</th>
                  <th>Item</th>
                  <th>Qty</th>
                  <th>Est. Cost</th>
                  <th>Budget Category</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody id="groceryTableBody">
                <!-- data rows inserted above this input row -->
                <tr id="groceryInputRow" class="grocery-input-row">
                  <td></td>
                  <td>
                    <input
                      type="text"
                      id="groceryItem"
                      placeholder="Item"
                      required
                    />
                  </td>
                  <td>
                    <input
                      type="number"
                      id="groceryQty"
                      placeholder="Qty"
                      min="1"
                      value="1"
                    />
                  </td>
                  <td>
                    <input
                      type="number"
                      id="groceryCost"
                      placeholder="Est. Cost"
                      min="0"
                      step="0.01"
                      required
                    />
                  </td>
                  <td>
                    <select id="groceryBudgetCat">
                      <option value="">Budget Category</option>
                      <option>Groceries</option>
                      <option>Kids/School</option>
                      <option>Transport</option>
                      <option>Utilities</option>
                      <option>Home Mortgage</option>
                      <option>Subscription</option>
                      <option>Savings</option>
                      <option>Others</option>
                    </select>
                  </td>
                  <td></td>
                </tr>
              </tbody>
            </table>

            <button type="submit" class="btn btn-primary grocery-submit-btn">
              Add to List
            </button>
          </form>

          <div class="add-to-list-label">
            Add to the list: type your item, amount &amp; choose its category.
          </div>
        </div>
      </section>
    </div>
  </main>
</div>

<script>
  const categories = [
    "Groceries",
    "Kids/School",
    "Transport",
    "Utilities",
    "Home Mortgage",
    "Subscription",
    "Savings",
    "Others"
  ];

  let totalSpent = 0;
  const categoryTotals = {};
  categories.forEach((c) => (categoryTotals[c] = 0));

  const categoryColors = {
    "Groceries": "#8bc34a",
    "Kids/School": "#ffb74d",
    "Transport": "#4dd0e1",
    "Utilities": "#ba68c8",
    "Home Mortgage": "#ef5350",
    "Subscription": "#66bb6a",
    "Savings": "#ffd54f",
    "Others": "#90a4ae"
  };

  function formatCurrency(value) {
    const num = isNaN(value) ? 0 : value;
    return "‚Ç± " + num.toLocaleString("en-PH", {
      minimumFractionDigits: 2,
      maximumFractionDigits: 2
    });
  }

  function updateSummary() {
    const budgetLimit = Number(document.getElementById("budgetInput").value) || 0;

    document.getElementById("totalSpentDisplay").textContent =
      formatCurrency(totalSpent);

    let percent = 0;
    if (budgetLimit > 0) {
      percent = (totalSpent / budgetLimit) * 100;
    }

    document.getElementById("budgetUsedLabel").textContent =
      `${percent.toFixed(1)}% Budget Used`;

    const remaining = budgetLimit - totalSpent;
    document.getElementById("remainingDisplay").textContent =
      "Remaining: " + formatCurrency(remaining);

    updateEcoCheckbox();
  }

  function drawPieChart() {
    const canvas = document.getElementById("pieChart");
    if (!canvas) return;
    const ctx = canvas.getContext("2d");
    const width = canvas.width;
    const height = canvas.height;
    const centerX = width / 2;
    const centerY = height / 2;
    const radius = Math.min(width, height) / 2 - 6;

    ctx.clearRect(0, 0, width, height);

    if (totalSpent <= 0) {
      ctx.beginPath();
      ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
      ctx.fillStyle = "#e8f5e9";
      ctx.fill();
      return;
    }

    let startAngle = -Math.PI / 2;

    categories.forEach((cat) => {
      const value = categoryTotals[cat];
      if (!value) return;

      const sliceAngle = (value / totalSpent) * Math.PI * 2;
      ctx.beginPath();
      ctx.moveTo(centerX, centerY);
      ctx.arc(centerX, centerY, radius, startAngle, startAngle + sliceAngle);
      ctx.closePath();
      ctx.fillStyle = categoryColors[cat] || "#ccc";
      ctx.fill();
      startAngle += sliceAngle;
    });

    ctx.beginPath();
    ctx.arc(centerX, centerY, radius * 0.55, 0, Math.PI * 2);
    ctx.fillStyle = "#ffffff";
    ctx.fill();
  }

  function updateCategorySummary() {
    const container = document.getElementById("categorySummary");
    container.innerHTML = "";
    categories.forEach((cat) => {
      const amount = categoryTotals[cat] || 0;
      const percent =
        totalSpent > 0 && amount > 0
          ? " (" + ((amount / totalSpent) * 100).toFixed(1) + "%)"
          : "";

      const row = document.createElement("div");
      row.className = "category-summary-row";

      const name = document.createElement("div");
      name.className = "category-summary-name";
      name.textContent = cat;

      const right = document.createElement("div");
      right.className = "category-summary-right";

      const val = document.createElement("div");
      val.className = "category-summary-amount";
      val.textContent = formatCurrency(amount) + percent;

      const btn = document.createElement("button");
      btn.type = "button";
      btn.textContent = "Clear";
      btn.className = "btn btn-secondary btn-clear-cat";
      btn.dataset.category = cat;

      right.appendChild(val);
      right.appendChild(btn);

      row.appendChild(name);
      row.appendChild(right);

      container.appendChild(row);
    });
  }

  function updateCategoryView() {
    const listDiv = document.getElementById("categoryList");
    listDiv.innerHTML = "";
    const wrapper = document.createElement("div");

    categories.forEach((cat) => {
      const row = document.createElement("div");
      row.className = "category-row";

      const name = document.createElement("div");
      name.className = "category-name";
      name.textContent = cat;

      const amount = categoryTotals[cat] || 0;
      const percent =
        totalSpent > 0 ? ((amount / totalSpent) * 100).toFixed(1) : "0.0";

      const val = document.createElement("div");
      val.textContent = `${percent}%`;

      row.appendChild(name);
      row.appendChild(val);
      wrapper.appendChild(row);
    });

    listDiv.appendChild(wrapper);
    drawPieChart();
    updateCategorySummary();
  }

  function updateEcoCheckbox() {
    const eco = document.getElementById("ecoCheckbox");
    const budgetLimit = Number(document.getElementById("budgetInput").value) || 0;
    const pendingAmount = Number(
      document.getElementById("expenseAmount").value
    ) || 0;

    if (budgetLimit <= 0) {
      eco.checked = false;
      return;
    }

    const projectedTotal = totalSpent + pendingAmount;
    eco.checked = projectedTotal <= budgetLimit;
  }

  function addToTotals(amount, category) {
    totalSpent += amount;
    if (totalSpent < 0) totalSpent = 0;

    if (category && categoryTotals.hasOwnProperty(category)) {
      categoryTotals[category] += amount;
      if (categoryTotals[category] < 0) categoryTotals[category] = 0;
    }

    updateSummary();
    updateCategoryView();
  }

  function initHeaderDate() {
    const todayLabel = document.getElementById("todayLabel");
    const today = new Date();
    todayLabel.textContent =
      "Today: " + today.toLocaleDateString(undefined, {
        year: "numeric",
        month: "long",
        day: "numeric"
      });

    const monthSelect = document.getElementById("monthSelect");
    const months = [
      "January","February","March","April","May","June",
      "July","August","September","October","November","December"
    ];
    months.forEach((m, idx) => {
      const opt = document.createElement("option");
      opt.value = idx + 1;
      opt.textContent = m;
      if (idx === today.getMonth()) opt.selected = true;
      monthSelect.appendChild(opt);
    });

    const yearSelect = document.getElementById("yearSelect");
    const currentYear = today.getFullYear();
    for (let y = currentYear - 2; y <= currentYear + 5; y++) {
      const opt = document.createElement("option");
      opt.value = y;
      opt.textContent = y;
      if (y === currentYear) opt.selected = true;
      yearSelect.appendChild(opt);
    }
  }

  function clearExpenseForm() {
    document.getElementById("expenseAmount").value = "";
    document.getElementById("expenseCategory").value = "";
    document.getElementById("expenseDate").value = "";
    document.getElementById("expenseNotes").value = "";
    document.getElementById("ecoCheckbox").checked = false;
    updateEcoCheckbox();
  }

  document.addEventListener("DOMContentLoaded", () => {
    initHeaderDate();
    updateSummary();
    updateCategoryView();

    const menuToggle = document.getElementById("menuToggle");
    const navPanel = document.getElementById("navPanel");

    menuToggle.addEventListener("click", () => {
      navPanel.classList.toggle("open");
    });

    document.addEventListener("click", (e) => {
      if (!navPanel.contains(e.target) && !menuToggle.contains(e.target)) {
        navPanel.classList.remove("open");
      }
    });

    const expenseForm = document.getElementById("expenseForm");
    expenseForm.addEventListener("submit", (e) => {
      e.preventDefault();

      const amount = Number(document.getElementById("expenseAmount").value);
      const category = document.getElementById("expenseCategory").value;
      const date = document.getElementById("expenseDate").value;

      if (!amount || amount <= 0 || !category || !date) {
        alert("Please fill in Amount, Category, and Date.");
        return;
      }

      addToTotals(amount, category);
      clearExpenseForm();
    });

    document
      .getElementById("expenseAmount")
      .addEventListener("input", updateEcoCheckbox);

    document
      .getElementById("budgetInput")
      .addEventListener("input", () => {
        updateSummary();
        updateEcoCheckbox();
      });

    document
      .getElementById("clearExpenseBtn")
      .addEventListener("click", () => clearExpenseForm());

    // Grocery list
    const groceryForm = document.getElementById("groceryForm");
    groceryForm.addEventListener("submit", (e) => {
      e.preventDefault();

      const item = document.getElementById("groceryItem").value.trim();
      const qty = Number(document.getElementById("groceryQty").value) || 1;
      const cost = Number(document.getElementById("groceryCost").value);
      const budgetCat = document.getElementById("groceryBudgetCat").value;

      if (!item || !cost) {
        alert("Please provide an item name and estimated cost.");
        return;
      }

      const tbody = document.getElementById("groceryTableBody");
      const inputRow = document.getElementById("groceryInputRow");

      const row = document.createElement("tr");

      const checkCell = document.createElement("td");
      const check = document.createElement("input");
      check.type = "checkbox";
      check.checked = true;
      checkCell.appendChild(check);

      const itemCell = document.createElement("td");
      itemCell.textContent = item;

      const qtyCell = document.createElement("td");
      qtyCell.textContent = qty;

      const costCell = document.createElement("td");
      costCell.textContent = formatCurrency(cost);

      const categoryForTotals = budgetCat || "Groceries";
      const budgetCatCell = document.createElement("td");
      budgetCatCell.textContent = categoryForTotals;

      const actionCell = document.createElement("td");
      const removeBtn = document.createElement("button");
      removeBtn.type = "button";
      removeBtn.textContent = "Remove";
      removeBtn.className = "btn btn-secondary btn-remove";
      actionCell.appendChild(removeBtn);

      row.appendChild(checkCell);
      row.appendChild(itemCell);
      row.appendChild(qtyCell);
      row.appendChild(costCell);
      row.appendChild(budgetCatCell);
      row.appendChild(actionCell);

      // store data so we can subtract later
      row.dataset.amount = cost;
      row.dataset.category = categoryForTotals;

      // insert ABOVE input row so input row stays at the bottom
      tbody.insertBefore(row, inputRow);

      addToTotals(cost, categoryForTotals);

      groceryForm.reset();
      document.getElementById("groceryQty").value = 1;
    });

    // Remove button in grocery table (event delegation)
    document
      .getElementById("groceryTableBody")
      .addEventListener("click", (e) => {
        if (!e.target.classList.contains("btn-remove")) return;

        const row = e.target.closest("tr");
        if (!row || !row.dataset.amount) return;

        const amount = parseFloat(row.dataset.amount) || 0;
        const category = row.dataset.category;

        if (amount && category) {
          addToTotals(-amount, category);
        }

        row.remove();
      });

    // Clear category buttons in Monthly Budget Summary
    document
      .getElementById("categorySummary")
      .addEventListener("click", (e) => {
        if (!e.target.classList.contains("btn-clear-cat")) return;

        const cat = e.target.dataset.category;
        if (!cat || !categoryTotals.hasOwnProperty(cat)) return;

        const amount = categoryTotals[cat] || 0;
        if (amount > 0) {
          addToTotals(-amount, cat);
        }
      });
  });
</script>
</body>
</html>
